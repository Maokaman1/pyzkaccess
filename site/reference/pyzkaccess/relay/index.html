
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Relay &mdash; pyzkaccess</title>

    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <link rel="stylesheet" href="../../../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../../../css/alabaster-overrides.css" type="text/css">

    

    
      <script src="../../../search/main.js"></script>
    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="module-pyzkaccessrelay">Module pyzkaccess.relay</h1>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>

    <span class="s1">&#39;Relay&#39;</span><span class="p">,</span>

    <span class="s1">&#39;RelayList&#39;</span>

<span class="p">]</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">.common</span> <span class="kn">import</span> <span class="n">UserTuple</span>

<span class="kn">from</span> <span class="nn">.enum</span> <span class="kn">import</span> <span class="n">RelayGroup</span><span class="p">,</span> <span class="n">ControlOperation</span>

<span class="kn">from</span> <span class="nn">.sdk</span> <span class="kn">import</span> <span class="n">ZKSDK</span>

<span class="k">class</span> <span class="nc">RelayInterface</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>

    <span class="nd">@abstractmethod</span>

    <span class="k">def</span> <span class="nf">switch_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Switch on a relay for the given time. If a relay is already</span>

<span class="sd">        switched on then its timeout will be refreshed</span>

<span class="sd">        :param timeout: timeout in seconds, Number between 0 and 255</span>

<span class="sd">        :return:</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">Relay</span><span class="p">(</span><span class="n">RelayInterface</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Concrete relay&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sdk</span><span class="p">:</span> <span class="n">ZKSDK</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="n">RelayGroup</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">=</span> <span class="n">group</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span> <span class="o">=</span> <span class="n">sdk</span>

    <span class="k">def</span> <span class="nf">switch_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Switch on a relay for the given time. If a relay is already</span>

<span class="sd">        switched on then its timeout will be refreshed</span>

<span class="sd">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="sd">         Number between 0 and 255</span>

<span class="sd">        :return:</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timeout must be in range 0..255, got {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="o">.</span><span class="n">control_device</span><span class="p">(</span>

            <span class="n">ControlOperation</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>

            <span class="n">timeout</span><span class="p">,</span>

            <span class="mi">0</span>

        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Relay</span><span class="p">):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">number</span> \

                   <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">group</span> \

                   <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span> <span class="ow">is</span> <span class="n">other</span><span class="o">.</span><span class="n">_sdk</span>

        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>

        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="s2">&quot;Relay.{}({})&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="s2">&quot;Relay(RelayGroup.{}, {})&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">RelayList</span><span class="p">(</span><span class="n">RelayInterface</span><span class="p">,</span> <span class="n">UserTuple</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Collection of relay objects which is used to perform group</span>

<span class="sd">    operations over multiple relays</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sdk</span><span class="p">:</span> <span class="n">ZKSDK</span><span class="p">,</span> <span class="n">relays</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Relay</span><span class="p">]</span> <span class="o">=</span> <span class="p">()):</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">relays</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span> <span class="o">=</span> <span class="n">sdk</span>

    <span class="k">def</span> <span class="nf">switch_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Switch on all relays in set for a given time</span>

<span class="sd">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="sd">         Number between 0 and 255</span>

<span class="sd">        :return:</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>

            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timeout must be in range 0..255, got {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">relay</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="o">.</span><span class="n">control_device</span><span class="p">(</span><span class="n">ControlOperation</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>

                                     <span class="n">relay</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>

                                     <span class="n">relay</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>

                                     <span class="n">timeout</span><span class="p">,</span>

                                     <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">aux</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RelayList&#39;</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;Return relays only from aux group&quot;&quot;&quot;</span>

        <span class="n">relays</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">RelayGroup</span><span class="o">.</span><span class="n">aux</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="p">,</span> <span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span>

    <span class="nd">@property</span>

    <span class="k">def</span> <span class="nf">lock</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RelayList&#39;</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;Return relays only from lock group&quot;&quot;&quot;</span>

        <span class="n">relays</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">RelayGroup</span><span class="o">.</span><span class="n">lock</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="p">,</span> <span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

        <span class="n">relays</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="p">,</span> <span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="k">return</span> <span class="n">relays</span>

    <span class="k">def</span> <span class="nf">by_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="s1">&#39;RelayList&#39;</span><span class="p">:</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Return only relays starting from 0 which are matched by given</span>

<span class="sd">        mask. E.g. for `mask=[1, 0, 0, 1, 0, 0, 1, 0]` the function</span>

<span class="sd">        returns the 1st, the 4th and the 7th of 8 relays.</span>

<span class="sd">        If mask is longer than count of relays, the rest values</span>

<span class="sd">        will be ignored:</span>

<span class="sd">        for 5 relays `mask=[1, 0, 0, 1, 0, 0, 1, 0]` will return</span>

<span class="sd">        the 1st and the 4th relays.</span>

<span class="sd">        If mask is shorter than count of relays then the rest relays</span>

<span class="sd">        will be ignored:</span>

<span class="sd">        for 8 relays `mask=[1, 0, 0]` will return the 1st relay only.</span>

<span class="sd">        :param mask: mask is a list of ints or bools</span>

<span class="sd">        :return: new instance of RelayList contained needed relays</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">relays</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sdk</span><span class="p">,</span> <span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span>
</code></pre></div>


</details>
<h2 id="classes">Classes</h2>
<h3 id="relay">Relay</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Relay</span><span class="p">(</span>
    <span class="n">sdk</span><span class="p">:</span> <span class="n">pyzkaccess</span><span class="o">.</span><span class="n">sdk</span><span class="o">.</span><span class="n">ZKSDK</span><span class="p">,</span>
    <span class="n">group</span><span class="p">:</span> <span class="n">pyzkaccess</span><span class="o">.</span><span class="n">enum</span><span class="o">.</span><span class="n">RelayGroup</span><span class="p">,</span>
    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span>
</code></pre></div>


<p>Concrete relay</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="n">Relay</span>(<span class="n">RelayInterface</span>):

    <span class="s">&quot;&quot;&quot;Concrete relay&quot;&quot;&quot;</span>

    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">sdk:</span> <span class="n">ZKSDK</span>, <span class="n">group:</span> <span class="n">RelayGroup</span>, <span class="n">number:</span> <span class="n">int</span>):

        <span class="nb">self</span>.<span class="n">group</span> = <span class="n">group</span>

        <span class="nb">self</span>.<span class="n">number</span> = <span class="n">number</span>

        <span class="nb">self</span>.<span class="n">_sdk</span> = <span class="n">sdk</span>

    <span class="n">def</span> <span class="n">switch_on</span>(<span class="nb">self</span>, <span class="n">timeout:</span> <span class="n">int</span>) -&gt; <span class="n">None:</span>

        <span class="s">&quot;&quot;&quot;</span>

<span class="s">        Switch on a relay for the given time. If a relay is already</span>

<span class="s">        switched on then its timeout will be refreshed</span>

<span class="s">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="s">         Number between 0 and 255</span>

<span class="s">        :return:</span>

<span class="s">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">timeout</span> &lt; <span class="mi">0</span> <span class="o">or</span> <span class="n">timeout</span> &gt; <span class="mi">255</span>:

            <span class="n">raise</span> <span class="n">ValueError</span>(<span class="s">&quot;Timeout must be in range 0..255, got {}&quot;</span>.<span class="nb">format</span>(<span class="n">timeout</span>))

        <span class="nb">self</span>.<span class="n">_sdk</span>.<span class="n">control_device</span>(

            <span class="n">ControlOperation</span>.<span class="n">output</span>.<span class="nb">value</span>,

            <span class="nb">self</span>.<span class="n">number</span>,

            <span class="nb">self</span>.<span class="n">group</span>.<span class="nb">value</span>,

            <span class="n">timeout</span>,

            <span class="mi">0</span>

        )

    <span class="n">def</span> <span class="n">__eq__</span>(<span class="nb">self</span>, <span class="n">other</span>):

        <span class="k">if</span> <span class="n">isinstance</span>(<span class="n">other</span>, <span class="n">Relay</span>):

            <span class="k">return</span> <span class="nb">self</span>.<span class="n">number</span> == <span class="n">other</span>.<span class="n">number</span> \

                   <span class="o">and</span> <span class="nb">self</span>.<span class="n">group</span> == <span class="n">other</span>.<span class="n">group</span> \

                   <span class="o">and</span> <span class="nb">self</span>.<span class="n">_sdk</span> <span class="k">is</span> <span class="n">other</span>.<span class="n">_sdk</span>

        <span class="k">return</span> <span class="nb">False</span>

    <span class="n">def</span> <span class="n">__ne__</span>(<span class="nb">self</span>, <span class="n">other</span>):

        <span class="k">return</span> <span class="nb">not</span> <span class="nb">self</span>.<span class="n">__eq__</span>(<span class="n">other</span>)

    <span class="n">def</span> <span class="n">__str__</span>(<span class="nb">self</span>):

        <span class="k">return</span> <span class="s">&quot;Relay.{}({})&quot;</span>.<span class="nb">format</span>(<span class="nb">self</span>.<span class="n">group</span>.<span class="nb">name</span>, <span class="nb">self</span>.<span class="n">number</span>)

    <span class="n">def</span> <span class="n">__repr__</span>(<span class="nb">self</span>):

        <span class="k">return</span> <span class="s">&quot;Relay(RelayGroup.{}, {})&quot;</span>.<span class="nb">format</span>(<span class="nb">self</span>.<span class="n">group</span>.<span class="nb">name</span>, <span class="nb">self</span>.<span class="n">number</span>)
</code></pre></div>


</details>
<hr />
<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>pyzkaccess.relay.RelayInterface</li>
</ul>
<h4 id="methods">Methods</h4>
<h5 id="switch_on">switch_on</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">switch_on</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>


<p>Switch on a relay for the given time. If a relay is already
switched on then its timeout will be refreshed
:param timeout: Timeout in seconds while relay will be enabled.
 Number between 0 and 255
:return:</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code>    <span class="n">def</span> <span class="n">switch_on</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">None</span><span class="p">:</span>

        <span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Switch on a relay for the given time. If a relay is already</span>

<span class="ss">        switched on then its timeout will be refreshed</span>

<span class="ss">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="ss">         Number between 0 and 255</span>

<span class="ss">        :return:</span>

<span class="ss">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">or</span> <span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>

            <span class="n">raise</span> <span class="n">ValueError</span><span class="p">(</span><span class="ss">&quot;Timeout must be in range 0..255, got {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">.</span><span class="n">control_device</span><span class="p">(</span>

            <span class="n">ControlOperation</span><span class="p">.</span><span class="k">output</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>

            <span class="k">self</span><span class="p">.</span><span class="nb">number</span><span class="p">,</span>

            <span class="k">self</span><span class="p">.</span><span class="k">group</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>

            <span class="n">timeout</span><span class="p">,</span>

            <span class="mi">0</span>

        <span class="p">)</span>
</code></pre></div>


</details>
<h3 id="relaylist">RelayList</h3>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RelayList</span><span class="p">(</span>
    <span class="n">sdk</span><span class="p">:</span> <span class="n">pyzkaccess</span><span class="o">.</span><span class="n">sdk</span><span class="o">.</span><span class="n">ZKSDK</span><span class="p">,</span>
    <span class="n">relays</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">pyzkaccess</span><span class="o">.</span><span class="n">relay</span><span class="o">.</span><span class="n">Relay</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
<span class="p">)</span>
</code></pre></div>


<p>Collection of relay objects which is used to perform group
operations over multiple relays</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="n">RelayList</span><span class="p">(</span><span class="n">RelayInterface</span><span class="p">,</span><span class="w"> </span><span class="n">UserTuple</span><span class="p">)</span><span class="err">:</span><span class="w"></span>

<span class="w">    </span><span class="ss">&quot;&quot;&quot;Collection of relay objects which is used to perform group</span>

<span class="ss">    operations over multiple relays</span>

<span class="ss">    &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">sdk</span><span class="p">:</span><span class="w"> </span><span class="n">ZKSDK</span><span class="p">,</span><span class="w"> </span><span class="nl">relays</span><span class="p">:</span><span class="w"> </span><span class="n">Iterable</span><span class="o">[</span><span class="n">Relay</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">())</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="n">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">relays</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sdk</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">switch_on</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">timeout</span><span class="p">:</span><span class="w"> </span><span class="nc">int</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Switch on all relays in set for a given time</span>

<span class="ss">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="ss">         Number between 0 and 255</span>

<span class="ss">        :return:</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">timeout</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">timeout</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="n">raise</span><span class="w"> </span><span class="n">ValueError</span><span class="p">(</span><span class="ss">&quot;Timeout must be in range 0..255, got {}&quot;</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">relay</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">self</span><span class="p">:</span><span class="w"></span>

<span class="w">            </span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">.</span><span class="n">control_device</span><span class="p">(</span><span class="n">ControlOperation</span><span class="p">.</span><span class="k">output</span><span class="p">.</span><span class="k">value</span><span class="p">,</span><span class="w"></span>

<span class="w">                                     </span><span class="n">relay</span><span class="p">.</span><span class="n">number</span><span class="p">,</span><span class="w"></span>

<span class="w">                                     </span><span class="n">relay</span><span class="p">.</span><span class="k">group</span><span class="p">.</span><span class="k">value</span><span class="p">,</span><span class="w"></span>

<span class="w">                                     </span><span class="n">timeout</span><span class="p">,</span><span class="w"></span>

<span class="w">                                     </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nv">@property</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">aux</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;RelayList&#39;</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;Return relays only from aux group&quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">relays</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">x for x in self if x.group == RelayGroup.aux</span><span class="o">]</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">,</span><span class="w"> </span><span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="nv">@property</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">lock</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;RelayList&#39;</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;Return relays only from lock group&quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">relays</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">x for x in self if x.group == RelayGroup.lock</span><span class="o">]</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">,</span><span class="w"> </span><span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">__getitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="n">relays</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="k">data</span><span class="o">[</span><span class="n">item</span><span class="o">]</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">slice</span><span class="p">)</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">,</span><span class="w"> </span><span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span><span class="w"></span>

<span class="w">        </span><span class="k">else</span><span class="err">:</span><span class="w"></span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">relays</span><span class="w"></span>

<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">by_mask</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">mask</span><span class="p">:</span><span class="w"> </span><span class="n">Iterable</span><span class="o">[</span><span class="n">Union[int, bool</span><span class="o">]</span><span class="err">]</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">&#39;RelayList&#39;</span><span class="err">:</span><span class="w"></span>

<span class="w">        </span><span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Return only relays starting from 0 which are matched by given</span>

<span class="ss">        mask. E.g. for `mask=[1, 0, 0, 1, 0, 0, 1, 0]` the function</span>

<span class="ss">        returns the 1st, the 4th and the 7th of 8 relays.</span>

<span class="ss">        If mask is longer than count of relays, the rest values</span>

<span class="ss">        will be ignored:</span>

<span class="ss">        for 5 relays `mask=[1, 0, 0, 1, 0, 0, 1, 0]` will return</span>

<span class="ss">        the 1st and the 4th relays.</span>

<span class="ss">        If mask is shorter than count of relays then the rest relays</span>

<span class="ss">        will be ignored:</span>

<span class="ss">        for 8 relays `mask=[1, 0, 0]` will return the 1st relay only.</span>

<span class="ss">        :param mask: mask is a list of ints or bools</span>

<span class="ss">        :return: new instance of RelayList contained needed relays</span>

<span class="ss">        &quot;&quot;&quot;</span><span class="w"></span>

<span class="w">        </span><span class="n">relays</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">x for x, m in zip(self, mask) if m</span><span class="o">]</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">,</span><span class="w"> </span><span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


</details>
<hr />
<h4 id="ancestors-in-mro_1">Ancestors (in MRO)</h4>
<ul>
<li>pyzkaccess.relay.RelayInterface</li>
<li>pyzkaccess.common.UserTuple</li>
</ul>
<h4 id="instance-variables">Instance variables</h4>
<div class="codehilite"><pre><span></span><code><span class="n">aux</span>
</code></pre></div>


<p>Return relays only from aux group</p>
<div class="codehilite"><pre><span></span><code><span class="n">lock</span>
</code></pre></div>


<p>Return relays only from lock group</p>
<h4 id="methods_1">Methods</h4>
<h5 id="by_mask">by_mask</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">by_mask</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">mask</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;RelayList&#39;</span>
</code></pre></div>


<p>Return only relays starting from 0 which are matched by given
mask. E.g. for <code>mask=[1, 0, 0, 1, 0, 0, 1, 0]</code> the function
returns the 1st, the 4th and the 7th of 8 relays.</p>
<p>If mask is longer than count of relays, the rest values
will be ignored:
for 5 relays <code>mask=[1, 0, 0, 1, 0, 0, 1, 0]</code> will return
the 1st and the 4th relays.</p>
<p>If mask is shorter than count of relays then the rest relays
will be ignored:
for 8 relays <code>mask=[1, 0, 0]</code> will return the 1st relay only.
:param mask: mask is a list of ints or bools
:return: new instance of RelayList contained needed relays</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code>    <span class="n">def</span> <span class="n">by_mask</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="k">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">bool</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="s1">&#39;RelayList&#39;</span><span class="p">:</span>

        <span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Return only relays starting from 0 which are matched by given</span>

<span class="ss">        mask. E.g. for `mask=[1, 0, 0, 1, 0, 0, 1, 0]` the function</span>

<span class="ss">        returns the 1st, the 4th and the 7th of 8 relays.</span>

<span class="ss">        If mask is longer than count of relays, the rest values</span>

<span class="ss">        will be ignored:</span>

<span class="ss">        for 5 relays `mask=[1, 0, 0, 1, 0, 0, 1, 0]` will return</span>

<span class="ss">        the 1st and the 4th relays.</span>

<span class="ss">        If mask is shorter than count of relays then the rest relays</span>

<span class="ss">        will be ignored:</span>

<span class="ss">        for 8 relays `mask=[1, 0, 0]` will return the 1st relay only.</span>

<span class="ss">        :param mask: mask is a list of ints or bools</span>

<span class="ss">        :return: new instance of RelayList contained needed relays</span>

<span class="ss">        &quot;&quot;&quot;</span>

        <span class="n">relays</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">m</span> <span class="k">in</span> <span class="n">zip</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span><span class="p">]</span>

        <span class="k">return</span> <span class="k">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">sdk</span><span class="o">=</span><span class="k">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">,</span> <span class="n">relays</span><span class="o">=</span><span class="n">relays</span><span class="p">)</span>
</code></pre></div>


</details>
<h5 id="copy">copy</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>


<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="err">    def copy(self): return self.__class__(self)</span>
</code></pre></div>


</details>
<h5 id="count">count</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">count</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">item</span>
<span class="p">)</span>
</code></pre></div>


<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="err">    def count(self, item): return self.data.count(item)</span>
</code></pre></div>


</details>
<h5 id="index">index</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">index</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">item</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span>
<span class="p">)</span>
</code></pre></div>


<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code><span class="err">    def index(self, item, *args): return self.data.index(item, *args)</span>
</code></pre></div>


</details>
<h5 id="switch_on_1">switch_on</h5>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">switch_on</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>


<p>Switch on all relays in set for a given time
:param timeout: Timeout in seconds while relay will be enabled.
 Number between 0 and 255
:return:</p>
<details class="example"><summary>View Source</summary><div class="codehilite"><pre><span></span><code>    <span class="n">def</span> <span class="n">switch_on</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">None</span><span class="p">:</span>

        <span class="ss">&quot;&quot;&quot;</span>

<span class="ss">        Switch on all relays in set for a given time</span>

<span class="ss">        :param timeout: Timeout in seconds while relay will be enabled.</span>

<span class="ss">         Number between 0 and 255</span>

<span class="ss">        :return:</span>

<span class="ss">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">or</span> <span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>

            <span class="n">raise</span> <span class="n">ValueError</span><span class="p">(</span><span class="ss">&quot;Timeout must be in range 0..255, got {}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">relay</span> <span class="k">in</span> <span class="k">self</span><span class="p">:</span>

            <span class="k">self</span><span class="p">.</span><span class="n">_sdk</span><span class="p">.</span><span class="n">control_device</span><span class="p">(</span><span class="n">ControlOperation</span><span class="p">.</span><span class="k">output</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>

                                     <span class="n">relay</span><span class="p">.</span><span class="nb">number</span><span class="p">,</span>

                                     <span class="n">relay</span><span class="p">.</span><span class="k">group</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>

                                     <span class="n">timeout</span><span class="p">,</span>

                                     <span class="mi">0</span><span class="p">)</span>
</code></pre></div>


</details>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
          
            
  <h1 class="logo"><a href="../../..">pyzkaccess</a></h1>



          
            



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#classes">Classes</a></li>
      <ul>
    
      <li><a href="#relay">Relay</a></li>
      <ul>
    
      <li><a href="#ancestors-in-mro">Ancestors (in MRO)</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#methods">Methods</a></li>
      <ul>
    
      <li><a href="#switch_on">switch_on</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#relaylist">RelayList</a></li>
      <ul>
    
      <li><a href="#ancestors-in-mro_1">Ancestors (in MRO)</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#instance-variables">Instance variables</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#methods_1">Methods</a></li>
      <ul>
    
      <li><a href="#by_mask">by_mask</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#copy">copy</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#count">count</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#index">index</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#switch_on_1">switch_on</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
  </ul>
    
  </ul>
    
  </ul>
  

  
</nav>
          
            
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../reader/" title="previous chapter">
        Reader
      </a></li>
    
    
      <li>Next: <a href="../sdk/" title="next chapter">
        Sdk
      </a></li>
    
  </ul>

          
            <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../../../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
          
        
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
      
        
        Powered by <a href="http://www.mkdocs.org">mkdocs 1.1.2</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">mkdocs-alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 1.1.2
  Docs Build Date UTC : 2020-09-07 18:53:09.135591+00:00
  -->
</body>
</html>